# üè† –õ–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã WebApp

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã

Webapp —Ä–∞–±–æ—Ç–∞–µ—Ç **–ª–æ–∫–∞–ª—å–Ω–æ** –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏ **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞**. –í—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞**.

## üîÑ –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

```
[WebApp (–ª–æ–∫–∞–ª—å–Ω–æ)] ‚Üê‚Üí [Telegram] ‚Üê‚Üí [Python Bot] ‚Üê‚Üí [–§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö]
```

1. **WebApp** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (file:// –∏–ª–∏ localhost)
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –¥–æ–±–∞–≤–ª—è–µ—Ç/—É–¥–∞–ª—è–µ—Ç —Ñ–∏–ª—å–º—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
3. **WebApp** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç—É —á–µ—Ä–µ–∑ `tg.sendData()`
4. **–ë–æ—Ç** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ñ–∞–π–ª—ã
5. **–ë–æ—Ç** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- üö´ **–ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–∫–∏–¥–∞—é—Ç Telegram
- üí∞ **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - –Ω–µ –Ω—É–∂–µ–Ω —Ö–æ—Å—Ç–∏–Ω–≥
- ‚ö° **–ë—ã—Å—Ç—Ä–æ** - –Ω–µ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫
- üõ°Ô∏è **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** - –≤—Å–µ —á–µ—Ä–µ–∑ –≤–∞—à –±–æ—Ç

## üì± –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. **–û—Ç–∫—Ä–æ–π—Ç–µ webapp —á–µ—Ä–µ–∑ –±–æ—Ç–∞:**
```
/webapp ‚Üí –ù–∞–∂–º–∏—Ç–µ "üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å"
```

### 2. **Webapp –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ** –≤ Telegram

### 3. **–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –±–æ—Ç—É:**
- ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ ‚Üí –∫–æ–º–∞–Ω–¥–∞ `add_movie`
- üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∏–ª—å–º–∞ ‚Üí –∫–æ–º–∞–Ω–¥–∞ `remove_movie`
- üìã –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ ‚Üí –∫–æ–º–∞–Ω–¥–∞ `get_movies`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **–õ–æ–∫–∞–ª—å–Ω—ã–π URL:**
```html
file:///Users/oleg/Dropbox/stuff/watchlist/webapp/index.html
```

### **–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥:**
```javascript
// Webapp –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –±–æ—Ç—É
window.Telegram.WebApp.sendData(JSON.stringify({
    command: 'add_movie',
    data: { movie: '–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞' },
    timestamp: Date.now(),
    mode: 'local'
}));
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ –±–æ—Ç–µ:**
```python
# –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É
async def handle_webapp_data(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
    data = json.loads(webapp_data.data)
    command = data.get('command')
    
    if command == 'add_movie':
        # –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–ª—å–º –≤ —Ñ–∞–π–ª
        movie_title = data.get('data', {}).get('movie')
        self.storage.add_movie(user_id, movie_title)
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
–û—Ç–∫—Ä–æ–π—Ç–µ `test.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ Telegram.

### **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: `python3 run.py`
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/webapp`
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- Webapp —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ **–≤–Ω—É—Ç—Ä–∏ Telegram**
- –¢—Ä–µ–±—É–µ—Ç **–ª–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø** –∫ —Ñ–∞–π–ª–∞–º
- **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** –≤ –æ–±—ã—á–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ (—Ç–æ–ª—å–∫–æ –≤ Telegram)

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### **–î–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª—ã webapp –≤ –Ω—É–∂–Ω—É—é –ø–∞–ø–∫—É
2. –û–±–Ω–æ–≤–∏—Ç–µ –ø—É—Ç—å –≤ `bot.py`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

### **–î–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
1. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã webapp –Ω–∞ GitHub Pages
2. –û–±–Ω–æ–≤–∏—Ç–µ URL –≤ `bot.py`
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å webapp —á–µ—Ä–µ–∑ –±–æ—Ç–∞

---

**–ì–ª–∞–≤–Ω–æ–µ:** Webapp —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–¥—É—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞! üéØ
